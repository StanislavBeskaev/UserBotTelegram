# UserBot для Telegram
Позволяет расширять функционал Telegram и производить различные действия со своими сообщениями

## Реализованные команды
* .type: Команда для медленного набора текста. Использование: .type <Текст>. Текст будет отображаться с эффектом печатания.
* !cat: Команда для отправки котика
* !joke: Команда для отображения анекдота
* .hack: Команда для взлома пентагона(понарошку)
* .heart: Команда для рисования сердечка с указанным символом (по умолчанию *). Использование: .heart <Символ> - будет нарисовано сердечко из указанного символа, если символ не указан то будет использован символ *
* .like: Команда для рисования пальца вверх, несколько вариантов, отправляется случайный


## Запуск
1) Локальный запуск:
   * Создать виртуальное окружение
   * Установить зависимости из файла requirements.txt
   * Выставить необходимые переменные окружения
   * Выполнить `python main.py`
   * Следовать инструкциям (нужно будет ввести номер телефона указанный в telegram, ввести полученный код)
2) Запуск в Docker:
   * Создать в директории проекта файл .env
   * Указать в файле .env обязательные переменные окружения и их значения
   * Собрать Docker образ (можно воспользоваться Makefile и готовой командой make docker_build)
   * Запустить собранный образ с флагами: --rm -it --env-file .env -v $(pwd):/user_bot (или воспользоваться готовый sh скриптом run.sh)
   * После первого запуска, ввода номера телефона и получения кода, последующий запуск можно делать в detach режиме (можно воспользоваться sh скриптом run_d.sh)

# Обязательные Переменные окружения
 - TG_API_ID - id приложения в Telegram
 - TG_API_HASH - hash приложения в Telegram


# Дополнительные переменные окружения
 - TYPING_SYMBOL - символ, который будет показан при печатании текста (команда .type)
 - TYPING_SYMBOL_INTERVAL - время (в секундах) в течении которого будет показан символ печатания


## Получение TG_API_ID и TG_API_HASH
 - Перейти по ссылке https://my.telegram.org/auth указать свой номер телефона, в Telegram придёт код. Авторизоваться.
 - Зайти в API development tools, заполнить необходимые поля ввода. Сохранить изменения.
 - TG_API_ID = значению в поле "App api_id"
 - TG_API_HASH = значению в поле "App api_hash"


## Добавление новой команды
В папке commands создать отдельный модуль с классом наследником от app.commands.base_command.BaseCommand. Добавить новую команды в README.
При запуске приложение само найден класс команды и будет использовать.
По аналогии с существующими командами реализовать функционал работы команды. Необходимо реализовать все абстрактные методы. 
Основной метод выполнения команды - execute